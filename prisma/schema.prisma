generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

enum TypeUser {
  creatorStore
  employeeStore
  user
}

enum StatusUser {
  pending
  aproved
  reject
}

enum DisponibilityUser {
  disponible
  indisponible
}

enum typePayment {
  credit
  debit
  money
}

enum TypeStatusNotification {
  viewed
  unviewed
}
enum TypeDay {
  segunda
  terca
  quarta
  quinta
  sexta
  sabado
  domingo
}

model User {
  id String @id @default(uuid())
  name     String
  userName String
  typeUser TypeUser
  email    String
  password String

  @@map("user")

  employees Employee[]
  employs Employ[]
  stores Store[]
  schedules Schedules[]
  files Files[]
  notifications Notification[]
}

model Employee {
  id String @id @default(uuid())
  storeId String
  userId String
  typeUser TypeUser
  status StatusUser
  CreatedAt DateTime @default(now())
  
  store Store @relation(fields: [storeId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("employee")
}

model Employ {
  id String @id @default(uuid())
  storeId String
  userId String
  disponibility DisponibilityUser
  score Int
  createdAt DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id],onDelete: Cascade)
  store Store @relation(fields: [storeId], references: [id], onDelete: Cascade)

  schedules Schedules[]

  @@map("employ")
}

model Store {
  id String @id @default(uuid())
  creatorId String
  storeName String
  city String
  disponibility DisponibilityUser
  longitude Float
  latitude Float
  createdAt DateTime @default(now())
  
  creator User @relation(fields: [creatorId], references: [id], onDelete: Cascade)

  employs Employ[]
  schedules Schedules[]
  times Time[]
  days Day[]

  @@map("store")
  employees Employee[]
}

model Schedules {
  id String @id @default(uuid())
  storeId String
  employId String
  userId String
  service String
  typePayment typePayment
  price Int
  timeId String
  date String
  createdAt DateTime @default(now())
  modifiedAt DateTime?
  
  store Store @relation(fields: [storeId], references: [id],onDelete: Cascade)
  employ Employ @relation(fields: [employId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  time Time @relation(fields: [timeId], references: [id], onDelete: Cascade)

  @@map("schedules")
}

model Time {
  id String @id @default(uuid())
  storeId String
  time String
  createdAt DateTime @default(now())

  store Store @relation(fields: [storeId], references: [id],onDelete: Cascade)

  schedules Schedules[]

  @@map("time")
}

model Day {
  id String @id @default(uuid())
  storeId String
  day TypeDay
  createdAt DateTime @default(now())
  
  store Store @relation(fields: [storeId], references: [id], onDelete: Cascade)

  @@map("day")
}
model Files {
  id String @id @default(uuid())
  userId String
  fileName String
  url String
  CreatedAt DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("files")
}

model Notification {
  id String @id @default(uuid())
  userId String
  title String
  content String
  status TypeStatusNotification
  createdAt DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("notification")
}
